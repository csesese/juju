<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jujumarket.member.mapper.MemberMapper">
	
	<!-- xml상 쿼리에 default 준거 #{}로 받아오면 안됨  -->
	<insert id="insert" >
		<selectKey keyProperty="idNo" order="BEFORE"
		resultType="String">
			select seq_t_member.nextval
			from dual
		</selectKey>

		insert into t_member(idNo, emailAccount, memName, memCode, postCode) 
		values(#{idNo}, #{emailAccount}, #{memName}, 'CUSTOMER', #{postCode}) 
	
		
	</insert>
	
	<select id ="getMemberIdNoByEmailAccount" resultType="String">
		select idNo 
		from t_member
		where emailAccount = #{emailAccount}
	
	</select>
	
		<!-- orderItemsForm.jsp에 뿌려주기 위한 회원정보들을 MemberVO, CustomerVO에서 각각 받아 OrderMemberVO를 만듦 -->
	<select id="orderMemberInfo" resultType="com.jujumarket.order.domain.OrderMemberVO">
	
		select tm.memname, tm.memaddr, mc.contact, tm.emailAccount, tm.idNo
		from t_member tm, m_customer mc
		where tm.idNo = mc.idNo
		and tm.idNo = #{idNo} 
	
	</select>


	
</mapper>