<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jujumarket.member.mapper.SellerMapper">

	<insert id="insert">
		insert into m_shop(idNo, shopName, shopAddr, shopPostCode,
		contact1, contact2)
		values(#{idNo}, #{shopName}, #{shopAddr, jdbcType=VARCHAR}, #{shopPostCode, jdbcType=VARCHAR}, #{contact1}, #{contact2, jdbcType=VARCHAR})

	</insert>


	<insert id="insertJoinInfo">
		insert into m_history (historyNo, idNo, condition, memCode)
		values (seq_history.nextval, #{idNo}, '주니어상인', 'JUNIOR')
	</insert>

	<!-- 얘는 memCode도 받아와야 하는게 아닌지? 0801 주정은 -->
	<insert id="insertDeleteInfo">
		insert into m_history(historyNo, idNo, condition, memCode, reason)
		values(seq_history.nextval, #{idNo}, '탈퇴', 'SELLER', #{reason})
	</insert>
	
	<select id="getEmailList" resultType="String">
		select tm.emailAccount
		from t_member tm, m_shop ms
		where tm.idNo = ms.idNo 
		and tm.memName = #{memName}
		and ms.contact1 = #{contact1}
	
	</select>




	<select id="getSellerInfoByIdNo"
		resultType="com.jujumarket.member.domain.SellerVO">
		select
		tm.idNo, tm.emailAccount, tm.memName, tm.memAddr,
		tm.postCode,
		ms.shopName, ms.shopAddr, ms.contact1, ms.contact2,
		ms.shopPostCode,
		msi.businessCode,
		msi.businessRegFile, msi.bank,
		msi.bankAccount, msi.thumbImg,
		msi.backImg
		from t_member tm, m_shop ms,
		m_shop_info msi
		where tm.idNo =
		ms.idNo
		and ms.idNo = msi.idNo
		and tm.idNo
		= #{idNo}

	</select>

	<update id="modifySellerInfo">
		update m_shop
		set
		shopName = #{shopName},
		shopAddr = #{shopAddr, jdbcType=VARCHAR},
		shopPostCode = #{shopPostCode, jdbcType=VARCHAR},
		contact1 = #{contact1},
		contact2 = #{contact2, jdbcType=VARCHAR}
		where idNo =
		#{idNo}
	</update>

	<delete id="deleteSeller">
		delete m_shop
		where idNo = #{idNo}

	</delete>




</mapper>